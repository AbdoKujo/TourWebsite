{% load cms_tags %}
<!-- navbar  -->
<nav class="navbar">
    <div class="container flex">
        <a href="{% url 'home' %}" class="site-brand">
            {% if navbar_logo_element %}
                {% autoescape off %}
                    {% editable_text navbar_logo_element 'title' %}
                {% endautoescape %}
            {% else %}
                Marrakech<span>Activities</span><span>Portal</span>
            {% endif %}
        </a>
        <button type="button" id="navbar-show-btn" class="flex">
            <i class="fas fa-bars"></i>
        </button>
        <div id="navbar-collapse">
            <button type="button" id="navbar-close-btn" class="flex">
                <i class="fas fa-times"></i>
            </button>
            {% if navbar_element %}
                <!-- Editable navbar items from JSON -->
                <div data-editable="json" data-element-id="{{ navbar_element.id }}" class="navbar-json-container">
                    <ul class="navbar-nav">
                        {% with navbar_element.json_content|json_parse as navbar_data %}
                            {% for item in navbar_data %}
                                <li class="nav-item">
                                    <a href="{{ item.src }}" class="nav-link">{{ item.title }}</a>
                                </li>
                            {% endfor %}
                        {% endwith %}
                    </ul>
                </div>
            {% elif navbar_elements %}
                <!-- Legacy individual navbar elements -->
                <ul class="navbar-nav">
                    {% for element in navbar_elements %}
                        <li class="nav-item">
                            <a href="{{ element.src }}" class="nav-link">{% editable_text element 'title' %}</a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <!-- Default navbar items -->
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a href="{% url 'home' %}" class="nav-link">Home</a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'page_detail' 'gallery' %}" class="nav-link">Gallery</a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'page_detail' 'about' %}" class="nav-link">Services</a>
                    </li>
                    <li class="nav-item">
                        <a href="{% url 'page_detail' 'contact' %}" class="nav-link">Contact</a>
                    </li>
                </ul>
            {% endif %}
        </div>
    </div>
</nav>
<!-- end of navbar  -->
